module.exports=function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.MetrixNoop=t.Metrix=void 0;var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),a=i(u),c=n(2),f=o(c),l="/metrix",d="_pmx",v=1051200,h="_pmxb",p=15,_="_pmxz",E=p,O=100,y=6e4;t.Metrix=function(){function e(t){var n=this;r(this,e),this.identify=function(){var e=a.getCookies([d,h,_]),t=e[d];""==t&&(t=a.generateUID()),a.setCookie(d,t,v);var o=e[h];""==o&&(o=a.generateUID()),a.setCookie(h,o,p);var i=e[_];""==i&&(i=window.location.search.substr(1)),a.setCookie(_,i,E),a.log("clientID:",t),n.clientID=t,n.sessionID=o,n.sessionQS=i},this.enqueue=function(e,t){a.log("tracking:",e),n.queue.push(e),n.sync()},this.dispatch=function(){if(0!=n.queue.length){a.log("dispatching...",n.queue);for(var e={cid:n.clientID,sid:n.sessionID,sqs:n.sessionQS,tzo:n.timezoneOffset,events:[]},t=0;t<n.queue.length;t++){var o=n.queue[t];e.events.push(o.json())}n.queue=[],fetch(n.metrixURL,{method:"post",mode:"cors",credentials:"include",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){a.log("metrix dispatch response:",e)}).catch(function(e){console.error("metrix:",e)})}},this.serverHost=t.replace(/\/$/,""),this.metrixURL=""+this.serverHost+l,this.identify(),setInterval(this.identify,y),this.timezoneOffset=(new Date).getTimezoneOffset(),this.track=(0,f.default)(this.enqueue),this.sync=a.debounce(this.dispatch,O),this.queue=[]}return s(e,[{key:"clearIdentity",value:function(){}}]),e}(),t.MetrixNoop=function e(){r(this,e),this.track=new Proxy({},{get:function(e,t){return function(){}}})};if("undefined"!=typeof window&&"undefined"==typeof window.fetch)throw"metrix.js requires fetch(), check your runtime and try again."},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=arguments,i=(t.log=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n]},t.generateUID=function(){var e=Math.floor((new Date).getTime()/1e3),t=Math.floor(1e9*Math.random());return t+"."+e},t.getCookies=function(e){for(var t={},n=document.cookie.split(";"),o=0;o<e.length;o++){var i=e[o],r=i+"=";t[i]="";for(var s=0;s<n.length;s++){for(var u=n[s];" "==u.charAt(0);)u=u.substring(1);if(0==u.indexOf(r)){t[i]=u.substring(r.length,u.length);break}}}return t});t.getCookie=function(e){return i([e])[e]},t.setCookie=function(e,t,n){var o=new Date;o.setTime(o.getTime()+60*n*1e3);var i="expires="+o.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"},t.debounce=function(e,t,n){var i=void 0;return function(){var r=void 0,s=o,u=function(){i=null,n||e.apply(r,s)},a=n&&!i;clearTimeout(i),i=setTimeout(u,t),a&&e.apply(r,s)}}},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(3),s=function(e){return{event:function(t,n,o){var i=new u(t,n,o);e(i,null)},options:r.events}};t.default=s;var u=function(){function e(t,n,i){o(this,e),this.module=t,this.eventType=n,this.ts=new Date,this.url=window.location.href,this.data=i,this.verifyKeys()}return i(e,[{key:"verifyKeys",value:function(){var e=r.events.Module[this.module];void 0==e&&console.error("metrix: "+this.module+" is an unsupported module."),e=r.events.Event[this.eventType],void 0==e&&console.error("metrix: "+this.eventType+" is an unsupported event.")}},{key:"json",value:function(){return{ts:this.ts,module:this.module,event_type:this.eventType,url:this.url,data:this.data}}}]),e}()},function(e,t){var n={provide:function(){}},o={events:{}};n.provide("proto.events.Event"),n.provide("proto.events.Module"),o.events.Module={INVALID_MODULE:0,LOGIN:100,SIGNUP:101,USER_PROFILE:200,USER_SETTINGS:201,ORG_PROFILE:300,ORG_SETTINGS:301,HUB:400,HUB_STREAM:401,HUB_SPOTLIGHT:402,HUB_SETTINGS:403,HUB_TEAM:404,HUB_FEEDS:405,HUB_MANAGE_CONTENT:406,HUB_NEWSLETTERS:407,HUB_ANALYTICS:408,HUB_EMBEDS:409,FEED:500},o.events.Event={INVALID_EVENT:0,CREATE:1,VIEW:2,UPDATE:3,DELETE:4,PASSWORD_LOGIN_FAIL:101,PASSWORD_LOGIN_OK:102,SSO_LOGIN_FAIL:103,SSO_LOGIN_OK:104,SOCIAL_LOGIN_FAIL:105,SOCIAL_LOGIN_OK:106,POST_LIKE:200,POST_UNLIKE:201,POST_SHARE:202,POST_AMPLIFY:203,POST_COMMENT:204,POST_COMMENT_DELETE:205},e.exports=o}]);